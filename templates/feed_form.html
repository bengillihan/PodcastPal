{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h2 class="mb-4">{% if feed %}Edit{% else %}Create New{% endif %} Feed</h2>
        <form method="POST">
            <div class="mb-3">
                <label for="name" class="form-label">Feed Name</label>
                <input type="text" class="form-control" id="name" name="name" value="{{ feed.name if feed else '' }}" required>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="3" required>{{ feed.description if feed else '' }}</textarea>
            </div>
            <div class="mb-3">
                <label for="image_url" class="form-label">Podcast Image URL</label>
                <input type="url" class="form-control" id="image_url" name="image_url" value="{{ feed.image_url if feed else '' }}">
                <div class="form-text">
                    <strong>Google Drive Instructions:</strong><br>
                    1. Upload your image to Google Drive<br>
                    2. Right-click the image and select "Share"<br>
                    3. Click "Anyone with the link" and copy the link<br>
                    4. Paste the link here (format: https://drive.google.com/file/d/YOUR_FILE_ID/view)<br>
                    <br>
                    Recommended image size: 1400x1400 pixels<br>
                    Supported formats: JPG, JPEG, PNG, GIF
                </div>
            </div>
            <div class="mb-3">
                <label for="retention_period" class="form-label">Episode Retention Period</label>
                <select class="form-select" id="retention_period" name="retention_period" required>
                    <option value="30" {% if feed and feed.retention_period == 30 %}selected{% endif %}>30 days</option>
                    <option value="60" {% if feed and feed.retention_period == 60 %}selected{% endif %}>60 days</option>
                    <option value="90" {% if (feed and feed.retention_period == 90) or not feed %}selected{% endif %}>90 days (default)</option>
                    <option value="180" {% if feed and feed.retention_period == 180 %}selected{% endif %}>6 months (180 days)</option>
                    <option value="365" {% if feed and feed.retention_period == 365 %}selected{% endif %}>12 months (365 days)</option>
                </select>
                <div class="form-text">
                    How long episodes will remain in the RSS feed after their release date. Recurring episodes always appear.
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">{% if feed %}Update{% else %}Create{% endif %} Feed</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}